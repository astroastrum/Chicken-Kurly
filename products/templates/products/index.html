{% extends 'base.html' %}
{% load static %}
{% load humanize %}
{% block content %}
<div id="carouselExampleInterval" style="max-width:1900px; margin:0 auto 0;" class="carousel slide"
  data-bs-ride="carousel">
  <div class="carousel-inner">
    <div class="carousel-item active" data-bs-interval="5000">
      <img src="{% static 'images/carousel1.jpg' %}" class="d-block w-100" alt="..">
    </div>
    <div class="carousel-item" data-bs-interval="5000">
      <img src="{% static 'images/carousel2.jpg' %}" class="d-block w-100" alt="..">
    </div>
    <div class="carousel-item" data-bs-interval="5000">
      <img src="{% static 'images/carousel3.jpg' %}" class="d-block w-100" alt="..">
    </div>
  </div>
  <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleInterval" data-bs-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Previous</span>
  </button>
  <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleInterval" data-bs-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Next</span>
  </button>
</div>

<hr>
<div class="container d-flex justify-content-center align-items-center" style="max-width: 1070px; height: 88px">
  <ul class="d-flex justify-content-between category-list p-0 m-0"
    style="max-width: 800px;list-style: none; font-weight: 700;">
    <li>카테고리&nbsp</li>
    <li>닭가슴살&nbsp</li>
    <li>만두&nbsp</li>
    <li>샐러드&nbsp</li>
    <li>치킨&nbsp</li>
    <li>소스1&nbsp</li>
  </ul>
</div>

<!-- Slider main container -->
<div style="padding: 40px 0">
  <div class="container d-flex justify-content-center" style="width: 1070px; margin-bottom: 27px;">
    <h3 style="color: rgb(51, 51, 51)">이 상품은 어떤가요?</h3>
  </div>
  <div class="swiper-box" style="position: relative">
    <section class="swiper" id="test-slide">
      <!-- Additional required wrapper -->
      <div class="swiper-wrapper">
        <!-- Slides -->
        {% for product in products %}
        <div class="productcard swiper-slide" style="border: 0px solid black; color: rgb(51, 51, 51);">
          <a href="{% url 'products:detail' product.pk %}" style="color:rgb(51, 51, 51)">
            <div class="product-img" style="">
              <img src="{{ product.image_set.all.0.image.url }}" alt="" width="100%" height="329px"
                style="object-fit: cover">
            </div>
            <div style="padding: 12px 10px 0 0">
              <div class="d-flex justify-content-between">
                <span class="m-0" style="color:#B5B5B5; font-weight: 400;">{{ product.brand }}</span><span class="m-0"
                  style="color: #FA622F; font-weight: 700;">{{ product.category }}</span>
              </div>
              <p class="m-0" style="font-weight: 400;">{{ product.product_name }}</p>
              <p class="m-0" style="font-weight: 800;">{{ product.price|intcomma }} 원</p>
            </div>
          </a>
        </div>
        {% endfor %}
      </div>

      <div class="swiper-button-prev" style="position: absolute;"><i class="bi bi-arrow-left-circle-fill"
          style="font-size: 2.5rem; color:white; text-shadow: 2px 2px 4px #282323; z-index: 1000;"></i>
      </div>
      <div class="swiper-button-next"><i class="bi bi-arrow-right-circle-fill"
          style="font-size: 2.5rem; color:white; text-shadow: 2px 2px 4px #282323;"></i>
      </div>
    </section>
  </div>
</div>

<!-- 얇은 광고 배너1 -->
<div style="margin:auto; padding:40px 0; max-width:1070px; height: 220px">
  <img style="object-fit: cover;" width="1070px" height="140px" src="{% static 'images/carousel1.jpg' %}">
</div>

<!-- 많이 구매된 순 -->
<!-- Slider main container -->
<div style="padding: 40px 0;">
  <div class="container d-flex flex-column align-items-center" style="width: 1070px; margin-bottom: 27px;">
    <h3 style="color: rgb(51, 51, 51)">지금 가장 핫한 상품</h3>
    <p class="text-muted" style="font-size: 16px; font-weight:400;">최근 많은 고객들이 구매했어요</p>

  </div>
  <div class="swiper-box" style="position: relative; padding:0 40px;">
    <section class="swiper" id="test-slide">
      <!-- Additional required wrapper -->
      <div class="swiper-wrapper">
        <!-- Slides -->
        {% for product in sold %}
        <div class="productcard swiper-slide" style="border: 0px solid black; color: rgb(51, 51, 51);">
          <a href="{% url 'products:detail' product.pk %}" style="color: rgb(51, 51, 51)">
            <div class="product-img" style="">
              <img src="{{ product.image_set.all.0.image.url }}" alt="" width="100%" height="329px"
                style="object-fit: cover">
            </div>
            <div style="padding: 12px 10px 0 0">
              <div class="d-flex justify-content-between">
                <span class="m-0" style="color:#B5B5B5; font-weight: 400;">{{ product.brand }}</span><span class="m-0"
                  style="color: #FA622F; font-weight: 700;">{{ product.category }}</span>
              </div>
              <p class="m-0" style="font-weight: 400;">{{ product.product_name }}</p>
              <p class="m-0" style="font-weight: 600;">{{ product.price|intcomma}} 원</p>
            </div>
          </a>
        </div>
        {% endfor %}
      </div>

      <div class="swiper-button-prev" style="position: absolute;"><i class="bi bi-arrow-left-circle-fill"
          style="font-size: 2.5rem; color:white; text-shadow: 2px 2px 4px #282323; z-index: 1000;"></i>
      </div>
      <div class="swiper-button-next"><i class="bi bi-arrow-right-circle-fill"
          style="font-size: 2.5rem; color:white; text-shadow: 2px 2px 4px #282323;"></i>
      </div>
    </section>
  </div>
</div>

<!-- 조회수 순 -->
<!-- Slider main container -->
<div style="padding: 40px 0">
  <div class="container d-flex flex-column align-items-center"
    style="width: 1070px; margin-top: 40px; margin-bottom: 27px;">
    <h3 style="color: rgb(51, 51, 51)">높은 조회수를 기록한 상품</h3>
    <p class="text-muted" style="font-size: 16px; font-weight:400;">최근 많은 고객들이 찾아봤어요</p>
  </div>
  <div class="swiper-box" style="position: relative">
    <section class="swiper" id="test-slide">
      <!-- Additional required wrapper -->
      <div class="swiper-wrapper">
        <!-- Slides -->
        {% for hit in hits %}
        <div class="productcard swiper-slide" style="border: 0px solid black; color: rgb(51, 51, 51);">
          <a href="{% url 'products:detail' hit.pk %}" style="color: rgb(51, 51, 51)">
            <div class="product-img" style="">
              <img src="{{ hit.image_set.all.0.image.url }}" alt="" width="100%" height="329px"
                style="object-fit: cover">
            </div>
            <div style="padding: 12px 10px 0 0">
              <div class="d-flex justify-content-between">
                <span class="m-0" style="color:#B5B5B5; font-weight: 400;">{{ hit.brand }}</span><span class="m-0"
                  style="color: #FA622F; font-weight: 700;">{{ hit.category }}</span>
              </div>
              <p class="m-0" style="font-weight: 400;">{{ hit.product_name }}</p>
              <p class="m-0" style="font-weight: 600; line-height: 24px;">{{ hit.price|intcomma }} 원</p>
            </div>
          </a>
        </div>
        {% endfor %}
      </div>

      <div class="swiper-button-prev" style="position: absolute;"><i class="bi bi-arrow-left-circle-fill"
          style="font-size: 2.5rem; color:white; text-shadow: 2px 2px 4px #282323; z-index: 1000;"></i>
      </div>
      <div class="swiper-button-next"><i class="bi bi-arrow-right-circle-fill"
          style="font-size: 2.5rem; color:white; text-shadow: 2px 2px 4px #282323;"></i>
      </div>
    </section>
  </div>
</div>

<!-- 얇은 광고 배너2 -->
<div style="margin:auto; padding:40px 0; max-width:1070px; height: 220px">
  <img style="object-fit: cover;" width="1070px" height="140px" src="{% static 'images/thin3.jpg' %}">
</div>

<!-- 인스타그램 크롤링 -->
<div class="container d-flex flex-column justify-content-center align-items-center"
  style="max-width:1070px; height: 450px; font-weight: 600; padding: 40px 0;">
  <h3 style="font-size: 28px; color: rgb(51, 51, 51)">인스타그램 고객 후기</h3>
  <p class="text-muted" style="font-size: 16px; font-weight:400;">더 많은 고객 후기가 궁금하다면?</p>
  <div class="d-flex align-items-center" style="width: 1070px; margin: 0 auto;">
    <!-- LightWidget WIDGET -->
    <iframe src="//lightwidget.com/widgets/26580aa1222d578da6adfc0547d3aab4.html" scrolling="no"
      allowtransparency="true" class="lightwidget-widget" style="width:100%;border:0;overflow:hidden;"></iframe>
  </div>
  <div class="d-flex flex-column align-items-center" style="margin-top: 40px;">
    <p class="m-0" style="color:rgb(153, 153, 153); font-size: 16px; font-weight: 400;">#치킨컬리 해시태그를 사용해 후기를 공유해주세요</p>
    <p class="m-0" style="color:rgb(51, 51, 51); font-weight: 500;"><a class="non_a"
        href="https://www.instagram.com/chickenkurly_regram/">@chickenkurly_regram</a> #치킨컬리</p>
  </div>
</div>

<div class='d-flex row' style="margin: 0 auto; width: 1070px; height: 170px; overflow-x: scroll; overflow: hidden;">
  <div id="instafeed-container" class="scrolling-wrapper"
    style="width: 1070px; height: 170px; display: flex; gap: 5px; padding: 0px;">
  </div>
</div>

<script src="https://cdn.jsdelivr.net/gh/stevenschobert/instafeed.js@2.0.0rc1/src/instafeed.min.js"></script>
<script type="text/javascript">
  var userFeed = new Instafeed({
    get: 'user',
    target: "instafeed-container",
    resolution: 'low_resolution',
    accessToken: '{{ ACCESS_TOKEN }}',
    template: '<div class="swiper-slide" style="width:174px;"><a class="animation" href="\{\{link\}\}"><img src="\{\{image\}\}" /></a></div>',
  });
  userFeed.run();
</script>

{% if request.user.is_superuser == 1 %}
<a href="{% url 'products:create' %}" class="btn btn-primary">글쓰기</a>
{% endif %}
<script src="https://cdn.lightwidget.com/widgets/lightwidget.js"></script>
<script src="https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.min.js"></script>
<script>
  const swiper = new Swiper('#test-slide', {
    // Optional parameters
    direction: 'horizontal',
    slidesPerView: 4,
    spaceBetween: 15,
    loop: false,

    // If we need pagination
    pagination: {
      el: '.swiper-pagination',
    },

    // Navigation arrows
    navigation: {
      nextEl: '.swiper-button-next',
      prevEl: '.swiper-button-prev',
    },

    // And if we need scrollbar
    // scrollbar: {
    //   el: '.swiper-scrollbar',
    // },
  });
</script>
{% endblock %}