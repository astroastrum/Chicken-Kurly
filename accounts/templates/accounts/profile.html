{% extends 'base.html' %}
{% load django_bootstrap5 %}
{% bootstrap_css %}
{% bootstrap_javascript %}
{% block content %}
<div class="test-section" style="background-color: rgb(247, 247, 247); height:392px; padding: 40px 0">
  <div class="container test-grid" style="max-width: 1070px; display: grid;">
    <div class="profile" style="max-width: 100%; background-color: white;">
      <div class="px-4 py-3 contentcard" style="border-radius: 15px; ">
        <div class="d-flex justify-content-center pb-3">
          {% if person.image %}
          <img src="{{ person.image.url }}" alt="">
          {% else %}
          <img src="https://dummyimage.com/130x130/7a17d6/fff" class="rounded-circle" alt="프사대체용">
          {% endif %}
        </div>
        <div>
          <div class="d-flex justify-content-start">
            <h3 style="font-size: 24px;font-weight: 600; color: black; margin:0 30px 8px;">
              {{ person.username }}</h3>
          </div>
          <div class="row mb-3">
            <div class="col d-flex flex-column align-items-center" style="height: 45px;">
              <p class=" mb-1" style="font-size: 13px; color: rgb(115, 115, 115)">팔로워</p>
              <p class="text-black fw-bold" style="font-size: 16px;">{{ person.followers.count }}</p>
            </div>
            <div class="col d-flex flex-column align-items-center border-start" style="height: 45px;">
              <p class="mb-1" style="font-size: 13px; color: rgb(115, 115, 115)">팔로잉</p>
              <p class="text-black fw-bold" style="font-size: 16px;">{{ person.followings.count }}</p>
            </div>
            <div class="col d-flex flex-column align-items-center border-start" style="height: 45px;">
              <p class="mb-1" style="font-size: 13px; color: rgb(115, 115, 115)">리뷰</p>
              <p class="text-black fw-bold" style="font-size: 16px;">{{ person.followers.count }}</p>
            </div>
          </div>
        </div>
        <div>
          <div class="px-4">
            {% if person.username == user.username %}
            <a href="{% url 'accounts:profile_update' %}"><input class="form-control btn text-white"
                style="background-color: #5e0080; box-shadow:0 2px 5px 0 rgb(0 107 88 / 5%); font-weight: 500;"
                type="submit" value='프로필 편집'></a>
            {% else %}
            <form action="{% url 'accounts:follow' person.pk %}" method='POST'>
              {% csrf_token %}
              {% if user in person.followers.all %}
              <input class="form-control btn text-white"
                style="background-color: #5e0080; box-shadow:0 2px 5px 0 rgb(0 107 88 / 5%); font-weight: 500;"
                type="submit" value='팔로우 취소'>
              {% else %}
              <input class="form-control btn text-white"
                style="background-color: #5e0080; box-shadow:0 2px 5px 0 rgb(0 107 88 / 5%); font-weight: 500;"
                type="submit" value='팔로우'>
              {% endif %}
            </form>
            {% endif %}
          </div>
        </div>
      </div>
    </div>
    <section class="d-flex flex-column" style="gap: 4px">
      <div class="d-flex d-grid" style="width: 100%; height: 200px; gap: 4px;">
        <div style="width:212px; height:200px; background-color: white; padding: 26px 0 30px 30px;">
          <p class="m-0">누적 구매 금액</p>
          <p class="m-0" style="font-size: 20px; color:#5e0080; font-weight: 600;">100,000,000 <span
              style="font-size: 1rem;">원</span></p>
        </div>
        <div style="width:212px; height:200px; background-color: white; padding: 26px 0 30px 30px;">
          <p class="m-0">포인트 <i class="bi bi-arrow-right-short"></i></p>
          <p class="m-0" style="font-size: 20px; color:#5e0080; font-weight: 600;">2,555,330 <span
              style="font-size: 1rem;">P</span></p>
        </div>
        <div style="width:212px; height:200px; background-color: white; padding: 26px 0 30px 30px;">
          <p class="m-0">누적 구매 횟수</p>
          <p class="m-0" style="font-size: 20px; color:#5e0080; font-weight: 600;">1,211 <span
              style="font-size: 1rem;">회</span></p>
        </div>
      </div>
      <div class="d-flex d-grid" style="width: 100%; height: 100%; gap: 4px;">
        <div class="d-flex flex-column justify-content-center"
          style="width:50%; height:100%; background-color: white; padding: 20px 30px;">
          <p class="m-0">작성 게시글</p>
          <p class="m-0" style="font-size: 20px; color:#5e0080; font-weight: 600;">25 <span
              style="font-size: 1rem;">개</span></p>
        </div>
        <div class="d-flex flex-column justify-content-center"
          style="width:50%; height:100%; background-color: white; padding: 20px 30px;">
          <p class="m-0">작성 댓글</p>
          <p class="m-0" style="font-size: 20px; color:#5e0080; font-weight: 600;">312 <span
              style="font-size: 1rem;">개</span></p>
        </div>

      </div>
      <!-- <div style="width:200px; height:63px; background-color: white;"></div> -->
    </section>


  </div>
</div>

<div class="container d-flex justify-content-center">
  <div class="row">
    <div class="col-4 p-3">
      {% if person.image %}
      <img src="{{ person.image.url }}" alt="">
      {% else %}
      <img src="https://dummyimage.com/130x130/7a17d6/fff" class="rounded-circle" alt="프사대체용">
      {% endif %}
    </div>
    <div class="col-4 p-3 mx-auto my-auto w-50">
      <div class="row">
        <h2 class="fs-3 fw-bold">{{ person }}</h2>
        <div class="d-flex">
          <span class="fs-6 fw-light">팔로잉:
            {{ person.followings.count }}

          </span>
          <span class="fs-6 fw-light mx-3">팔로워:
            {{ person.followers.count }}
          </span>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- 회원정보 수정-->
<div class="d-flex justify-content-center">
  <a href="{% url 'accounts:profile_update' %}">회원정보 수정</a>
  {% if request.user.is_authenticated %}
  <p class="ms-3">
  <form action="{% url 'accounts:follow' person.pk %}" method="POST">
    {% csrf_token %}
    <input type="submit" value="팔로우" class="btn btn-outline-primary btn-sm">
  </form>
  </p>
  {% endif %}
</div>

<!-- 구매한 식품 <p>{{ purchases.user }}님이 구매하신 식품</p> <div class="row row-cols-4 g-3"> <div class="col"> <div class="card h-100"> {% if purchases.image %} <img src="{{ purchases.image.url }}" class="card-img-top" alt="..."> {% else %} <img src="https://dummyimage.com/70x80/7a17d6/fff" alt="상품대체용"> {% endif %}-->
<!-- 상품 정보 <div class="card-body"> {% for purchase in purchases %} <h5 class="card-title">{{ purchase.id }}</h5> <p class="card-text">{{ purchase.product }}</p> {% endfor %} </div> </div> </div> -->
<div class="tab-content" id="pills-tabContent">
  <div class="tab-pane fade show active" id="pills-domestic" role="tabpanel" aria-labelledby="pills-domestic-tab"
    tabindex="0">
    <div class="row row-cols-4 g-3">
      {% for purchase in purchases %}
      <div class="col mt-3" style="position:relative">
        <a href="">
          {% for img in purchases.image.all %}
          {% if forloop.first %}
          <img src="{{ img.image.url }}" alt="" class="img-fluid">
          {% endif %}
          {% endfor %}
          <span
            style="color:rgb(255, 255, 255); text-shadow: 1px 1px 2px black; font-weight:bold; font-size:100%; position:absolute; left:50%; bottom:0%; transform:translate(-50%, -50%);">{{
            domestic.location }}</span>
        </a>
      </div>
      {% endfor %}
    </div>
  </div>
  <div class="tab-pane fade" id="pills-overseas" role="tabpanel" aria-labelledby="pills-overseas-tab" tabindex="0">
    <div class="row row-cols-4 g-3">
      {% for purchase in purchases %}
      <div class="col mt-3" style="position:relative">
        <a href="">
          {% for img in purchases.image.all %}
          {% if forloop.first %}
          <img src="{{ img.image.url }}" alt="" class="img-fluid">
          {% endif %}
          {% endfor %}
          <span
            style="color:rgb(255, 255, 255); text-shadow: 1px 1px 2px black; font-weight:bold; font-size:100%; position:absolute; left:50%; bottom:0%; transform:translate(-50%, -50%);">{{
            oversea.location }}</span>
        </a>
      </div>
      {% endfor %}
    </div>
  </div>
</div>

<div class="tab-content" id="pills-tabContent">
  <div class="tab-pane fade show active" id="pills-domestic" role="tabpanel" aria-labelledby="pills-domestic-tab"
    tabindex="0">
    <div class="row row-cols-4 g-3">
      <div class="col mt-3" style="position:relative">
        <div href="">
          <img src="" alt="" class="img-fluid">
          <span
            style="color:rgb(255, 255, 255); text-shadow: 1px 1px 2px black; font-weight:bold; font-size:100%; position:absolute; left:50%; bottom:0%; transform:translate(-50%, -50%);">Product</span>
          </a>
        </div>
        <div class="col mt-3" style="position:relative">
          <a href="">
            <img src="https://dummyimage.com/70x80/7a17d6/fff" alt="" class="img-fluid">
            <span
              style="color:rgb(255, 255, 255); text-shadow: 1px 1px 2px black; font-weight:bold; font-size:100%; position:absolute; left:50%; bottom:0%; transform:translate(-50%, -50%);">Product</span>
          </a>
        </div>
        <div class="col mt-3" style="position:relative">
          <a href="">
            <img src="https://dummyimage.com/70x80/7a17d6/fff" alt="" class="img-fluid">
            <span
              style="color:rgb(255, 255, 255); text-shadow: 1px 1px 2px black; font-weight:bold; font-size:100%; position:absolute; left:50%; bottom:0%; transform:translate(-50%, -50%);">Product</span>
          </a>
        </div>
        <div class="col mt-3" style="position:relative">
          <a href="">
            <img src="https://dummyimage.com/70x80/7a17d6/fff">product</span>
          </a>
        </div>
        <div class="col mt-3" style="position:relative">
          <a href="">
            <img src="https://dummyimage.com/70x80/7a17d6/fff" alt="" class="img-fluid">
            <span
              style="color:rgb(255, 255, 255); text-shadow: 1px 1px 2px black; font-weight:bold; font-size:100%; position:absolute; left:50%; bottom:0%; transform:translate(-50%, -50%);">Product</span>
          </a>
        </div>
        <div class="col mt-3" style="position:relative">
          <a href="">
            <img src="https://dummyimage.com/70x80/7a17d6/fff" alt="" class="img-fluid">
            <span
              style="color:rgb(255, 255, 255); text-shadow: 1px 1px 2px black; font-weight:bold; font-size:100%; position:absolute; left:50%; bottom:0%; transform:translate(-50%, -50%);">Product</span>
          </a>
        </div>
        <div class="col mt-3" style="position:relative">
          <a href="">
            <img src="https://dummyimage.com/70x80/7a17d6/fff" alt="" class="img-fluid">
            <span
              style="color:rgb(255, 255, 255); text-shadow: 1px 1px 2px black; font-weight:bold; font-size:100%; position:absolute; left:50%; bottom:0%; transform:translate(-50%, -50%);">Product</span>
          </a>
        </div>
        <div class="col mt-3" style="position:relative">
          <a href="">
            <img src="https://dummyimage.com/70x80/7a17d6/fff" alt="" class="img-fluid">
            <span
              style="color:rgb(255, 255, 255); text-shadow: 1px 1px 2px black; font-weight:bold; font-size:100%; position:absolute; left:50%; bottom:0%; transform:translate(-50%, -50%);">Product</span>
          </a>
        </div>
      </div>
    </div>
  </div>

  {% for purchase in purchases.all %}
  <img src="{{ purchase.image.url }}" alt="">
  <p>{{ purchase.title }}</p>
  <br><br>
  <img src="{{ purchase.image_thumbnail.url }}" alt="">
  {% endfor %}
  <!-- 찜한 식품 -->

  {% endblock content %}